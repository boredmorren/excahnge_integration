declare 
    l_http_request  utl_http.req;
    l_http_response utl_http.resp;
    l_text varchar2(32767);
begin
    l_http_request := utl_http.begin_request('127.0.0.1:5000/get_latest');

    l_http_response := utl_http.get_response(l_http_request);

    begin
        loop
            utl_http.read_text(l_http_response, l_text, 32766);
            dbms_output.put_line(l_text);
        end loop;
    exception 
        when utl_http.end_of_body then
            utl_http.end_response(l_http_response);
    end;

exception 
    when utl_http.end_of_body then
        utl_http.end_response(l_http_response);
        raise;
end;

declare
    sKEY    varchar2(4000);
    cJSON   clob := '{
  "base_code": "RUB",
  "conversion_rates": {
    "AED": 0.04672,
    "AFN": 0.8861,
    "ALL": 1.0911,
    "AMD": 4.866,
    "ANG": 0.02277,
    "AOA": 11.8078,
    "ARS": 15.1019,
    "AUD": 0.0195,
    "AWG": 0.02277,
    "AZN": 0.0216,
    "BAM": 0.02177,
    "BBD": 0.02545,
    "BDT": 1.555,
    "BGN": 0.02177,
    "BHD": 0.004784,
    "BIF": 37.674,
    "BMD": 0.01272,
    "BND": 0.01637,
    "BOB": 0.08786,
    "BRL": 0.07081,
    "BSD": 0.01272,
    "BTN": 1.0884,
    "BWP": 0.1698,
    "BYN": 0.03956,
    "BZD": 0.02545,
    "CAD": 0.01741,
    "CDF": 36.9537,
    "CHF": 0.01046,
    "CLP": 11.8902,
    "CNY": 0.09142,
    "COP": 52.5626,
    "CRC": 6.4532,
    "CUP": 0.3053,
    "CVE": 1.2274,
    "CZK": 0.2759,
    "DJF": 2.2611,
    "DKK": 0.08307,
    "DOP": 0.7519,
    "DZD": 1.6697,
    "EGP": 0.6302,
    "ERN": 0.1908,
    "ETB": 1.733,
    "EUR": 0.01113,
    "FJD": 0.02851,
    "FKP": 0.009418,
    "FOK": 0.08299,
    "GBP": 0.009417,
    "GEL": 0.03465,
    "GGP": 0.009418,
    "GHS": 0.1339,
    "GIP": 0.009418,
    "GMD": 0.9223,
    "GNF": 110.371,
    "GTQ": 0.09752,
    "GYD": 2.6559,
    "HKD": 0.09987,
    "HNL": 0.331,
    "HRK": 0.08387,
    "HTG": 1.6604,
    "HUF": 4.4662,
    "IDR": 206.9655,
    "ILS": 0.04448,
    "IMP": 0.009418,
    "INR": 1.0884,
    "IQD": 16.5829,
    "IRR": 542.8484,
    "ISK": 1.5986,
    "JEP": 0.009418,
    "JMD": 2.0272,
    "JOD": 0.00902,
    "JPY": 1.8419,
    "KES": 1.6399,
    "KGS": 1.1087,
    "KHR": 51.0536,
    "KID": 0.0195,
    "KMF": 5.4762,
    "KRW": 17.388,
    "KWD": 0.003886,
    "KYD": 0.0106,
    "KZT": 6.4723,
    "LAK": 275.9755,
    "LBP": 1138.6879,
    "LKR": 3.7952,
    "LRD": 2.5299,
    "LSL": 0.2252,
    "LYD": 0.06917,
    "MAD": 0.1163,
    "MDL": 0.2189,
    "MGA": 57.0722,
    "MKD": 0.6855,
    "MMK": 26.6421,
    "MNT": 45.7517,
    "MOP": 0.1029,
    "MRU": 0.5029,
    "MUR": 0.5807,
    "MVR": 0.1961,
    "MWK": 22.0897,
    "MXN": 0.2424,
    "MYR": 0.05393,
    "MZN": 0.8092,
    "NAD": 0.2252,
    "NGN": 19.7046,
    "NIO": 0.4671,
    "NOK": 0.1284,
    "NPR": 1.7414,
    "NZD": 0.02102,
    "OMR": 0.004892,
    "PAB": 0.01272,
    "PEN": 0.04618,
    "PGK": 0.05278,
    "PHP": 0.7105,
    "PKR": 3.5919,
    "PLN": 0.04743,
    "PYG": 101.9403,
    "QAR": 0.04631,
    "RON": 0.05601,
    "RSD": 1.3047,
    "RUB": 1,
    "RWF": 18.144,
    "SAR": 0.04771,
    "SBD": 0.1081,
    "SCR": 0.1836,
    "SDG": 5.6848,
    "SEK": 0.122,
    "SGD": 0.01637,
    "SHP": 0.009418,
    "SLE": 0.2896,
    "SLL": 289.601,
    "SOS": 7.2395,
    "SRD": 0.4647,
    "SSP": 59.7102,
    "STN": 0.2727,
    "SYP": 163.4666,
    "SZL": 0.2252,
    "THB": 0.4156,
    "TJS": 0.1282,
    "TMT": 0.04452,
    "TND": 0.03743,
    "TOP": 0.03063,
    "TRY": 0.499,
    "TTD": 0.08632,
    "TVD": 0.0195,
    "TWD": 0.3807,
    "TZS": 33.2666,
    "UAH": 0.5279,
    "UGX": 45.7177,
    "USD": 0.01272,
    "UYU": 0.5272,
    "UZS": 161.4351,
    "VES": 1.2711,
    "VND": 330.2888,
    "VUV": 1.5271,
    "WST": 0.0335,
    "XAF": 7.3016,
    "XCD": 0.03435,
    "XCG": 0.02277,
    "XDR": 0.009256,
    "XOF": 7.3016,
    "XPF": 1.3283,
    "YER": 3.0877,
    "ZAR": 0.2252,
    "ZMW": 0.319,
    "ZWL": 0.343
  },
  "documentation": "https://www.exchangerate-api.com/docs",
  "result": "success",
  "terms_of_use": "https://www.exchangerate-api.com/terms",
  "time_last_update_unix": 1749600001,
  "time_last_update_utc": "Wed, 11 Jun 2025 00:00:01 +0000",
  "time_next_update_unix": 1749686401,
  "time_next_update_utc": "Thu, 12 Jun 2025 00:00:01 +0000"
}';
begin
    null;
end;
